[DEBUG] Getting matching hook commands for SessionStart with query: clear
[DEBUG] Found 0 hook matchers in settings
[DEBUG] Matched 0 unique hooks for query "clear" (0 before deduplication)
[DEBUG] FileHistory: Added snapshot for 47ec80b4-9e9a-4635-a6c0-bc6895e17da7, tracking 0 files
[DEBUG] Rendering user message with 1 content blocks
[DEBUG] Block 0: <command-name>/clear</command-name>
            <command-message>clear</command-message>
           ...
[DEBUG] UserCommandMessage rendering: "clear" (args: "none")
[DEBUG] isSkillFormat: false, prefix: "/"
[DEBUG] AutoUpdater: Detected installation type: npm-global
[DEBUG] AutoUpdater: Using global update method
[ERROR] lnA: lnA: Failed to install new version of claude:  npm error code ENOTEMPTY
npm error syscall rename
npm error path /home/linuxbrew/.linuxbrew/lib/node_modules/@anthropic-ai/claude-code
npm error dest /home/linuxbrew/.linuxbrew/lib/node_modules/@anthropic-ai/.claude-code-YY4U4Fz3
npm error errno -39
npm error ENOTEMPTY: directory not empty, rename '/home/linuxbrew/.linuxbrew/lib/node_modules/@anthropic-ai/claude-code' -> '/home/linuxbrew/.linuxbrew/lib/node_modules/@anthropic-ai/.claude-code-YY4U4Fz3'
npm error A complete log of this run can be found in: /home/jamestroutman/.npm/_logs/2025-11-11T13_36_12_244Z-debug-0.log
    at iDA (file:///home/linuxbrew/.linuxbrew/lib/node_modules/@anthropic-ai/claude-code/cli.js:1875:389)
    at process.processTicksAndRejections (node:internal/process/task_queues:103:5)
    at async file:///home/linuxbrew/.linuxbrew/lib/node_modules/@anthropic-ai/claude-code/cli.js:2861:32593
[DEBUG] BigQuery metrics exported successfully
[DEBUG] API Response: {
  "accepted_count": 3,
  "rejected_count": 0
}
[DEBUG] MCP server "context7": HTTP connection dropped after 603s uptime
[DEBUG] MCP server "context7": Connection error: SSE stream disconnected: TypeError: terminated
[DEBUG] MCP server "context7": No token data found
[DEBUG] MCP server "ide": Calling MCP tool: getDiagnostics
[DEBUG] Hooks: getAsyncHookResponseAttachments called
[DEBUG] Hooks: checkForNewResponses called
[DEBUG] Hooks: Found 0 total hooks in registry
[DEBUG] Hooks: checkForNewResponses returning 0 responses
[DEBUG] MCP server "ide": Tool 'getDiagnostics' completed successfully in 15ms
[DEBUG] Getting matching hook commands for UserPromptSubmit with query: undefined
[DEBUG] Found 0 hook matchers in settings
[DEBUG] Matched 0 unique hooks for query "no match query" (0 before deduplication)
[DEBUG] FileHistory: Making snapshot for message 42911807-daeb-44c6-b51f-8ff7617f7f43
[DEBUG] FileHistory: Added snapshot for 42911807-daeb-44c6-b51f-8ff7617f7f43, tracking 0 files
[DEBUG] MCP server "ide": Calling MCP tool: closeAllDiffTabs
[DEBUG] MCP server "ide": Tool 'closeAllDiffTabs' completed successfully in 43ms
[DEBUG] Skills and commands included in Skill tool:
[DEBUG] Slash commands included in SlashCommand tool:
[DEBUG] Stream started - received first chunk
[DEBUG] Stream started - received first chunk
[DEBUG] Getting matching hook commands for Stop with query: undefined
[DEBUG] Found 0 hook matchers in settings
[DEBUG] Matched 0 unique hooks for query "no match query" (0 before deduplication)
[DEBUG] MCP server "ide": Calling MCP tool: getDiagnostics
[DEBUG] Hooks: getAsyncHookResponseAttachments called
[DEBUG] Hooks: checkForNewResponses called
[DEBUG] Hooks: Found 0 total hooks in registry
[DEBUG] Hooks: checkForNewResponses returning 0 responses
[DEBUG] MCP server "ide": Tool 'getDiagnostics' completed successfully in 16ms
[DEBUG] Getting matching hook commands for UserPromptSubmit with query: undefined
[DEBUG] Found 0 hook matchers in settings
[DEBUG] Matched 0 unique hooks for query "no match query" (0 before deduplication)
[DEBUG] FileHistory: Making snapshot for message 7cb009ef-893d-41c0-94ff-60aa2f6076f0
[DEBUG] FileHistory: Added snapshot for 7cb009ef-893d-41c0-94ff-60aa2f6076f0, tracking 0 files
[DEBUG] MCP server "ide": Calling MCP tool: closeAllDiffTabs
[DEBUG] MCP server "ide": Tool 'closeAllDiffTabs' completed successfully in 30ms
[DEBUG] Skills and commands included in Skill tool:
[DEBUG] Slash commands included in SlashCommand tool:
[DEBUG] Stream started - received first chunk
[DEBUG] Stream started - received first chunk
[DEBUG] executePreToolHooks called for tool: Bash
[DEBUG] Getting matching hook commands for PreToolUse with query: Bash
[DEBUG] Found 0 hook matchers in settings
[DEBUG] Matched 0 unique hooks for query "Bash" (0 before deduplication)
[DEBUG] Stream started - received first chunk
[DEBUG] Permission suggestions for Bash: [
  {
    "type": "addRules",
    "rules": [
      {
        "toolName": "Bash",
        "ruleContent": "git checkout:*"
      }
    ],
    "behavior": "allow",
    "destination": "localSettings"
  }
]
[DEBUG] Getting matching hook commands for Notification with query: undefined
[DEBUG] Found 0 hook matchers in settings
[DEBUG] Matched 0 unique hooks for query "no match query" (0 before deduplication)
[DEBUG] Persisting permission update: addRules to source 'localSettings'
[DEBUG] Persisting 1 allow rule(s) to localSettings
[DEBUG] Writing to temp file: /home/jamestroutman/code/experiments/clarity-turbo/my-turborepo/.claude/settings.local.json.tmp.201402.1762868355040
[DEBUG] Preserving file permissions: 100644
[DEBUG] Temp file written successfully, size: 5157 bytes
[DEBUG] Applied original permissions to temp file
[DEBUG] Renaming /home/jamestroutman/code/experiments/clarity-turbo/my-turborepo/.claude/settings.local.json.tmp.201402.1762868355040 to /home/jamestroutman/code/experiments/clarity-turbo/my-turborepo/.claude/settings.local.json
[DEBUG] File /home/jamestroutman/code/experiments/clarity-turbo/my-turborepo/.claude/settings.local.json written atomically
[DEBUG] Applying permission update: Adding 1 allow rule(s) to destination 'localSettings': ["Bash(git checkout:*)"]
[DEBUG] AutoUpdaterWrapper: Installation type: npm-global, using native: false
[DEBUG] Getting matching hook commands for PostToolUse with query: Bash
[DEBUG] Found 0 hook matchers in settings
[DEBUG] Matched 0 unique hooks for query "Bash" (0 before deduplication)
[DEBUG] MCP server "ide": Calling MCP tool: getDiagnostics
[DEBUG] Hooks: getAsyncHookResponseAttachments called
[DEBUG] Hooks: checkForNewResponses called
[DEBUG] Hooks: Found 0 total hooks in registry
[DEBUG] Hooks: checkForNewResponses returning 0 responses
[DEBUG] MCP server "ide": Tool 'getDiagnostics' completed successfully in 27ms
[DEBUG] Skills and commands included in Skill tool:
[DEBUG] Slash commands included in SlashCommand tool:
[DEBUG] AutoUpdater: Detected installation type: npm-global
[DEBUG] AutoUpdater: Using global update method
[DEBUG] Stream started - received first chunk
[ERROR] lnA: lnA: Failed to install new version of claude:  npm error code ENOTEMPTY
npm error syscall rename
npm error path /home/linuxbrew/.linuxbrew/lib/node_modules/@anthropic-ai/claude-code
npm error dest /home/linuxbrew/.linuxbrew/lib/node_modules/@anthropic-ai/.claude-code-YY4U4Fz3
npm error errno -39
npm error ENOTEMPTY: directory not empty, rename '/home/linuxbrew/.linuxbrew/lib/node_modules/@anthropic-ai/claude-code' -> '/home/linuxbrew/.linuxbrew/lib/node_modules/@anthropic-ai/.claude-code-YY4U4Fz3'
npm error A complete log of this run can be found in: /home/jamestroutman/.npm/_logs/2025-11-11T13_39_15_994Z-debug-0.log
    at iDA (file:///home/linuxbrew/.linuxbrew/lib/node_modules/@anthropic-ai/claude-code/cli.js:1875:389)
    at process.processTicksAndRejections (node:internal/process/task_queues:103:5)
    at async file:///home/linuxbrew/.linuxbrew/lib/node_modules/@anthropic-ai/claude-code/cli.js:2861:32593
[DEBUG] Stream started - received first chunk
[DEBUG] Getting matching hook commands for Stop with query: undefined
[DEBUG] Found 0 hook matchers in settings
[DEBUG] Matched 0 unique hooks for query "no match query" (0 before deduplication)
[DEBUG] AutoUpdaterWrapper: Installation type: npm-global, using native: false
[DEBUG] AutoUpdater: Detected installation type: npm-global
[DEBUG] AutoUpdater: Using global update method
[ERROR] lnA: lnA: Failed to install new version of claude:  npm error code ENOTEMPTY
npm error syscall rename
npm error path /home/linuxbrew/.linuxbrew/lib/node_modules/@anthropic-ai/claude-code
npm error dest /home/linuxbrew/.linuxbrew/lib/node_modules/@anthropic-ai/.claude-code-YY4U4Fz3
npm error errno -39
npm error ENOTEMPTY: directory not empty, rename '/home/linuxbrew/.linuxbrew/lib/node_modules/@anthropic-ai/claude-code' -> '/home/linuxbrew/.linuxbrew/lib/node_modules/@anthropic-ai/.claude-code-YY4U4Fz3'
npm error A complete log of this run can be found in: /home/jamestroutman/.npm/_logs/2025-11-11T13_39_43_577Z-debug-0.log
    at iDA (file:///home/linuxbrew/.linuxbrew/lib/node_modules/@anthropic-ai/claude-code/cli.js:1875:389)
    at process.processTicksAndRejections (node:internal/process/task_queues:103:5)
    at async file:///home/linuxbrew/.linuxbrew/lib/node_modules/@anthropic-ai/claude-code/cli.js:2861:32593
[DEBUG] AutoUpdaterWrapper: Installation type: npm-global, using native: false
[DEBUG] Getting matching hook commands for SessionEnd with query: undefined
[DEBUG] Found 0 hook matchers in settings
[DEBUG] Matched 0 unique hooks for query "no match query" (0 before deduplication)
[DEBUG] Cleaned up session snapshot: /home/jamestroutman/.claude/shell-snapshots/snapshot-zsh-1762867685217-xl3xcc.sh
[DEBUG] MCP server "chrome-devtools": Sending SIGINT to MCP server process
[DEBUG] MCP server "context7": HTTP transport closed/disconnected, attempting automatic reconnection
[DEBUG] MCP server "playwright": Sending SIGINT to MCP server process
[DEBUG] MCP server "supabase": HTTP transport closed/disconnected, attempting automatic reconnection
[DEBUG] MCP server "atlassian": SSE transport closed/disconnected, attempting automatic reconnection
[DEBUG] MCP server "monday": SSE transport closed/disconnected, attempting automatic reconnection
[DEBUG] LSP server manager shut down successfully
[DEBUG] FileHistory: Making snapshot for message 08076b09-98c5-4c9c-8d64-07f852109e4d
[DEBUG] FileHistory: Added snapshot for 08076b09-98c5-4c9c-8d64-07f852109e4d, tracking 0 files
[DEBUG] Rendering user message with 1 content blocks
[DEBUG] Block 0: <command-name>/exit</command-name>
            <command-message>exit</command-message>
            <...
[DEBUG] UserCommandMessage rendering: "exit" (args: "none")
[DEBUG] isSkillFormat: false, prefix: "/"
[DEBUG] MCP server "context7": Initializing HTTP transport to https://mcp.context7.com/mcp
[DEBUG] MCP server "context7": Node version: v25.1.0, Platform: linux
[DEBUG] MCP server "context7": Environment: {"NODE_OPTIONS":"not set","UV_THREADPOOL_SIZE":"default","HTTP_PROXY":"not set","HTTPS_PROXY":"not set","NO_PROXY":"not set"}
[DEBUG] MCP server "supabase": Initializing HTTP transport to http://localhost:54321/mcp
[DEBUG] MCP server "supabase": Node version: v25.1.0, Platform: linux
[DEBUG] MCP server "supabase": Environment: {"NODE_OPTIONS":"not set","UV_THREADPOOL_SIZE":"default","HTTP_PROXY":"not set","HTTPS_PROXY":"not set","NO_PROXY":"not set"}
[DEBUG] MCP server "context7": MTLS options: default
[DEBUG] MCP server "context7": HTTP transport options: {"url":"https://mcp.context7.com/mcp","headers":{"User-Agent":"claude-code/2.0.32"},"hasAuthProvider":true,"timeoutMs":60000}
[DEBUG] MCP server "context7": HTTP transport created successfully
[DEBUG] MCP server "context7": Client created, setting up request handler
[DEBUG] MCP server "context7": Starting connection with timeout of 30000ms
[DEBUG] MCP server "context7": Testing basic HTTP connectivity to https://mcp.context7.com/mcp
[DEBUG] MCP server "context7": Parsed URL: host=mcp.context7.com, port=default, protocol=https:
[DEBUG] MCP server "supabase": MTLS options: default
[DEBUG] MCP server "supabase": HTTP transport options: {"url":"http://localhost:54321/mcp","headers":{"User-Agent":"claude-code/2.0.32"},"hasAuthProvider":true,"timeoutMs":60000}
[DEBUG] MCP server "supabase": HTTP transport created successfully
[DEBUG] MCP server "supabase": Client created, setting up request handler
[DEBUG] MCP server "supabase": Starting connection with timeout of 30000ms
[DEBUG] MCP server "supabase": Testing basic HTTP connectivity to http://localhost:54321/mcp
[DEBUG] MCP server "supabase": Parsed URL: host=localhost, port=54321, protocol=http:
[DEBUG] MCP server "supabase": Using loopback address: localhost
[DEBUG] MCP server "atlassian": SSE transport initialized, awaiting connection
[DEBUG] MCP server "atlassian": Starting connection with timeout of 30000ms
[DEBUG] MCP server "atlassian": Returning tokens
[DEBUG] MCP server "atlassian": Token length: 93
[DEBUG] MCP server "atlassian": Has refresh token: true
[DEBUG] MCP server "atlassian": Expires in: 2687s
[DEBUG] MCP server "monday": SSE transport initialized, awaiting connection
[DEBUG] MCP server "monday": Starting connection with timeout of 30000ms
[DEBUG] MCP server "monday": Returning tokens
[DEBUG] MCP server "monday": Token length: 58
[DEBUG] MCP server "monday": Has refresh token: true
[DEBUG] MCP server "monday": Expires in: 604210s
[DEBUG] MCP server "context7": HTTP connection dropped after 711s uptime
[DEBUG] MCP server "context7": Connection error: SSE stream disconnected: AbortError: This operation was aborted
[DEBUG] MCP server "context7": No token data found
[DEBUG] MCP server "supabase": No token data found
[DEBUG] MCP server "chrome-devtools": SIGINT failed, sending SIGTERM to MCP server process
[DEBUG] MCP server "playwright": SIGINT failed, sending SIGTERM to MCP server process
[DEBUG] MCP server "chrome-devtools": MCP server process exited cleanly
[DEBUG] MCP server "playwright": MCP server process exited cleanly
[DEBUG] MCP server "supabase": No token data found
[DEBUG] MCP server "supabase": No token data found
[DEBUG] MCP server "supabase": Successfully connected to http server in 279ms
[DEBUG] MCP server "supabase": Connection established with capabilities: {"hasTools":true,"hasPrompts":false,"hasResources":false,"serverVersion":{"name":"supabase","title":"Supabase","version":"0.5.5"}}
[DEBUG] MCP server "supabase": No token data found
[DEBUG] MCP server "context7": No token data found
[DEBUG] MCP server "context7": No token data found
[DEBUG] MCP server "context7": Successfully connected to http server in 443ms
[DEBUG] MCP server "context7": Connection established with capabilities: {"hasTools":true,"hasPrompts":false,"hasResources":false,"serverVersion":{"name":"Context7","version":"1.0.13"}}
[DEBUG] MCP server "context7": No token data found
[DEBUG] MCP server "context7": HTTP reconnection successful after 798ms
[DEBUG] MCP server "supabase": HTTP reconnection successful after 762ms
[DEBUG] MCP server "atlassian": Returning tokens
[DEBUG] MCP server "atlassian": Token length: 93
[DEBUG] MCP server "atlassian": Has refresh token: true
[DEBUG] MCP server "atlassian": Expires in: 2687s
[ERROR] OpenTelemetry telemetry flush timed out after 1000ms

To resolve this issue, you can:
1. Increase the timeout by setting CLAUDE_CODE_OTEL_SHUTDOWN_TIMEOUT_MS env var (e.g., 5000 for 5 seconds)
2. Check if your OpenTelemetry backend is experiencing scalability issues
3. Disable OpenTelemetry by unsetting CLAUDE_CODE_ENABLE_TELEMETRY env var

Current timeout: 1000ms
[DEBUG] Writing to temp file: /home/jamestroutman/.claude.json.tmp.201402.1762868402618
[DEBUG] Preserving file permissions: 100644
[DEBUG] Temp file written successfully, size: 47127 bytes
[DEBUG] Applied original permissions to temp file
[DEBUG] Renaming /home/jamestroutman/.claude.json.tmp.201402.1762868402618 to /home/jamestroutman/.claude.json
[DEBUG] File /home/jamestroutman/.claude.json written atomically
